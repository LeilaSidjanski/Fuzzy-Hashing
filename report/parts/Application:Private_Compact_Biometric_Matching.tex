\newpage
\section{Application: Private and Compact Biometric Matching}
\label{Application: Private and Compact Biometric Matching}

This section delves into the practical application of fuzzy hashing within the realm of biometric matching. Employing the Hamming distance for biometric matching offers a systematic approach by iteratively generating \textit{l} iterations of the \textit{PreHash} function, defined as:

\begin{equation}
    \begin{aligned}
        Hash_{\text{key}}^m &= Hash_{\text{key}_1, \ldots, \text{key}_l}^m(X)\\
        &= (PreHash_{\text{key}_1}^m(X), \ldots, PreHash_{\text{key}_l}^m(X))
    \end{aligned}
\end{equation}

Subsequently, the Hamming distance between the resulting hash values of two biometric samples \(X\) and \(Y\) is calculated as:

\[d_H(Hash_{key}(X), Hash_{key}(Y)) = \# \{i: PreHash_{key_i}(X) \neq PreHash_{key_i}(Y)\}\]

This expression quantifies the instances "i" where the outputs of the \textit{PreHash} function differ between samples \(X\) and \(Y\).

One notable advantage of this approach is the reduction in size of the stored biometric template. Rather than storing \textit{n} pixels, \textit{ml} integers are stored. Additionally, the key renders the reference \textit{PreHash} less privacy-sensitive compared to a biometric template. Specifically, if the key is known, each integer in the hash discloses about \(\frac{1}{p}\) pixels, revealing \(\frac{ml}{p}\) pixels at worst. This disclosure occurs because, with the keys, the hash values can potentially be reverse-engineered to reveal characteristics of the original biometric pattern. The term \(p\)​ reflects the information entropy associated with each bit being a vein (\('1'\)) and thus quantifies the average information content each disclosed pixel conveys when the hash is decoded.

Similarly, when employing the Hamming distance for biometric matching through the iterative generation of \textit{l} iterations of the \textit{PostHash} function, analogous advantages arise. Here, the stored biometric template is condensed to \textit{mld} integers instead of \textit{n} pixels. Furthermore, the key diminishes the sensitivity of the reference \textit{PostHash} in terms of privacy, exposing \(\frac{mld}{p}\) pixels at most if known. Additionally, \textit{PostHash} contributes to leakage reduction.

It's crucial to note that for both scenarios, additional privacy safeguards can be implemented, for instance a restricted access to the key. Hence, the intricacies of the biometric infrastructure must be addressed on a case-by-case basis.

\subsection{Theoretical Foundations of FPR and FNR within Fuzzy Hashing Systems}

Transforming biometric data into a hash, using methods like \textit{PreHash} or its more compact version, \textit{PostHash}, plays a key role in enhancing the system's efficiency and security. This process helps protect privacy, which in turn influences important aspects of the system's performance, such as the \hyperref[def:FNR]{False Negative Rate (FNR)} and the \hyperref[def:FPR]{False Positive Rate (FPR)}. By converting detailed biometric data into a simpler, hashed format, the system not only uses storage space more efficiently but also reduces the chances of unauthorized access to sensitive information. This transformation is crucial for maintaining the integrity of the data and provides a strong line of defense against potential security threats. Additionally, choosing the right techniques for generating these hashes can greatly improve the system's ability to distinguish between authorized and unauthorized users. This means fewer mistakes in the form of false rejections or acceptances, leading to a more accurate and dependable biometric verification process.

We establish a threshold \(t\) to evaluate the match between two biometric samples, \(X\) and \(Y\), by analyzing the Hamming distance between their hash values.
We define that a match is confirmed if the difference between \(l\) (the total iterations) and the Hamming distance is equal to or exceeds the threshold \(t\), expressed as: \[l - d_H(Hash_{\text{key}}(X), Hash_{\text{key}}(Y)) \geq t\]
In contrast, we define there being no match if the following equation holds: \[l - d_H(Hash_{\text{key}}(X), Hash_{\text{key}}(Y)) < t\]

To further refine our understanding, we use statistical methods to approximate this comparison to a normal distribution, allowing us to more accurately calculate the False Negative Rate (FNR). This measure helps us assess how often the system incorrectly fails to recognize a match between the biometric samples when there actually is one. We define:

\begin{equation}
    \label{eq:fnr}
    FNR = \Phi\left( \frac{t - l\mu_{\text{same}}^m}{\sqrt{l\mu_{\text{same}}^m}} \right)
\end{equation}

Here, \(\Phi\) denotes the Cumulative Distribution Function (CDF) of the standard normal distribution, denoted as \(\mathcal{N}(0, 1)\).

In contrast, the False Positive Rate (FPR), the proportion of non-matching biometric samples incorrectly identified as matches by the system, is defined as:

\begin{equation}
    \label{eq:fpr}
    FPR = \Phi\left(- \frac{t - l\mu_{\text{diff}}^m}{\sqrt{l\mu_{\text{diff}}^m}} \right)
\end{equation}

These formulations allow for the evaluation of false match rates based on the standard deviation and mean of the distributions for same and different samples, respectively. The upper bound \(\mu_{same}\) and \(\mu_{diff}\) are defined in Equation \ref{eq:mu}.

For instance, employing \(\Phi(-2.33) \approx 1\%\) as a benchmark, we calculate the threshold (\(t\)) from parameters \(m\) and \(l\) to achieve an FNR of 1\% and an FPR \(\leq 2^{-36} \). The theoretical resulting set of parameters is as follows: 

\begin{table}[htbp] 
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
        \hline
        \textit{m} & \textit{l} & \textit{t} & \textit{l}\(\mu_{\text{same}}^m\) & \textit{l}\(\mu_{\text{diff}}^m\) & \textit{FNR} & \textit{FPR} \\
        \hline
        1 & 637 & 118 & 146.5 & 49 & 1.0\% & \(2^{-74}\) \\
        %1 & 637 & 118 & 146.5 & 49 & 2^⁻6\% & \(2^{-74}\) \\
        2 & 961 & 34 & 50.8 & 5.7 & 1.0\% & \(2^{-106}\) \\
        %2 & 961 & 34 & 50.8 & 5.7 & 2^⁻6\% & \(2^⁻106\) \\
        3 & 2569 & 18 & 31.3 & 1.2 & 1.0\% &\(2^{-179}\) \\
        %3 & 2569 & 18 & 31.3 & 1.2 & 2^⁻6\% &\(2^{-179}\) \\
        4 & 8481 & 12 & 23.7 & 0.3 & 1.0\% & \(2^{-377}\) \\
        %4 & 8481 & 12 & 23.7 & 0.3 & 2^⁻6\% &\(2^{-377}\) \\
        5 & 32 999 & 11 & 21.2 & 0.1 & 1.0\% & \(2^{-967}\) \\
        %5 & 32 999 & 11 & 21.2 & 0.1 & 2^⁻6\% &\(2^{-967}\) \\
        6 & 140 090 & 10 & 20.7 & 0.0 & 1.0\% & \(2^{-\infty}\) \\
        %6 & 140 090 & 10 & 20.7 & 0.0 & 2^⁻6\% &\(2^{-\infty}\) \\
        7 & 568 315 & 9 & 19.4 & 0.0 & 1.0\% & \(2^{-\infty}\) \\
        %7 & 568 315 & 9 & 19.4 & 0.0 & 2^⁻6\% &\(??\) \\
        8 & 2 841 573 & 11 & 22.3 & 0.0 & 1.0\% & \(2^{-\infty}\) \\
        %8 & 2 841 573 & 11 & 22.3 & 0.0 & 2^⁻6\% &\(??\) \\
        \hline
    \end{tabular}
    \caption{Theoretical Parameterization Results for FNR and FPR Calculation}
    \label{tab:theoretical_parameterization}
\end{table}

Using compression techniques implemented through \textit{PostHash}, specifically compressing to \( D = 16 \) (\( d = 4 \)), we calculate the threshold (\( t \)) from parameters \( m = 1 \) and \( l \) to achieve an FNR of \(1\%\) and an FPR \(\leq 2^{-36} \). The introduction of compression slightly modifies the equations for FNR (\ref{eq:fnr}) and FPR (\ref{eq:fpr}), necessitating the use of \( q \) in place of \(\mu^m\). The theoretical resulting set of parameters is as follows:
\begin{equation}
\small
m = 1 \quad l = 1107 \quad t = 276 \quad lq_{\text{same}} = 317.7 \quad lq_{\text{diff}} = 130.6 \quad \text{FNR} = 1.0\% \quad \text{FPR} = 2^{-121}
\end{equation}
The compressed hash requires \( mld = 4428 \) bits (\( 553 \) bytes).

Recomputing to obtain an FPR \(\leq 1\%\), we derive the following parameters without compression:
\begin{equation}
\small
m = 1 \quad l = 217 \quad t = 33 \quad l\mu_{\text{same}}^m = 50 \quad l\mu_{\text{diff}}^m = 16.8 \quad \text{FNR} = 1.0\% \quad \text{FPR} = 2^{-14}
\end{equation}

With compression, the parameters are:
\begin{equation}
\small
m = 1 \quad l = 347 \quad t = 76 \quad lq_{\text{same}} = 99.6 \quad lq_{\text{diff}} = 40.9 \quad \text{FNR} = 1.0\% \quad \text{FPR} = 2^{-25}
\end{equation}
The compressed hash requires \( mld = 1388 \) bits (\( 174 \) bytes).

Using compression to \( D = 2 \) (\( d = 1 \)), we obtain:
\begin{equation}
\small
m = 1 \quad l = 3597 \quad t = 76 \quad lq_{\text{same}} = 99.6 \quad lq_{\text{diff}} = 40.9 \quad \text{FNR} = 1.0\% \quad \text{FPR} = 2^{-488}
\end{equation}


\subsection{Experimental Derivation of the FNR and FPR for different (\(m, l\)) Parameter Configurations}
To experimentally derive the False Negative Rate (FNR) and False Positive Rate (FPR) for different \((m, l)\) parameter configurations, the initial step involves computing the Hamming distance between \( Hash_{\text{key}}(X) \) and \( Hash_{\text{key}}(Y) \). To generate the \( Hash_{\text{key}} \) of an image, which consists of the \( l \) iterations of \textit{PreHash}, we designed the \textit{Iterative\_PreHash} algorithm to accept multiple inputs, including a list of \( l \) keys and the parameter \( m \), which denotes the number of indices each call to \textit{PreHash} should generate per key. For testing purposes, the \( l \) keys are simply integers ranging from 0 to \( l-1 \), converted into a two-byte binary format. We then process the generated iterations of \textit{PreHash} for both images, comparing each iteration. Each comparison results in a 1 if the iterations differ and a 0 if they are the same. Summing the comparison results allows us to calculate the total number of ones, effectively computing the Hamming distance between the iterations.

Next, we utilize the theoretical parameter configurations (\ref{tab:theoretical_parameterization}) to determine if two images, \(X\) and \(Y\), are a match, defined as \(l - d_H(Hash_{key}(X), Hash_{key}(Y)) \geq t \). Two types of comparisons are being performed on our data: (1) comparing images from the same person and the same finger, which should result in a match, and (2) comparing images from different people and/or different fingers. For the first type of comparison, if two finger images from the same person and finger do not result in a match (i.e., \( l - d_H(Hash_{key}(X), Hash_{key}(Y)) < t \)), this contributes to the FNR. Conversely, for the second type of comparison, if two finger images from different people or fingers do match, this contributes to the FPR.

To calculate the FNR, we sum the instances where there is no match between images that should match and calculate the mean. Similarly, for the FPR, we sum the instances where there is a match between images that should not match and calculate the mean.

\begin{enumerate}
    \item \textbf{m = 1, l = 637 and t = 118}
    ...
\end{enumerate}

\textbf{Summary of the FNR and FPR results obtained}
\begin{table}[htbp] 
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
        \hline
        \textit{m} & \textit{l} & \textit{t} & \textit{l}\(\mu_{\text{same}}^m\) & \textit{l}\(\mu_{\text{diff}}^m\) & \textit{FNR} & \textit{FPR} \\
        \hline
        1 & 637 & 118 & 146.5 & 49 & ?\% & ? \\
        %1 & 637 & 118 & 146.5 & 49 & 2^⁻6\% & \(2^{-74}\) \\
        2 & 961 & 34 & 50.8 & 5.7 & ?\% & ? \\
        %2 & 961 & 34 & 50.8 & 5.7 & 2^⁻6\% & \(2^⁻106\) \\
        3 & 2569 & 18 & 31.3 & 1.2 & ?\% & ? \\
        %3 & 2569 & 18 & 31.3 & 1.2 & 2^⁻6\% &\(2^{-179}\) \\
        4 & 8481 & 12 & 23.7 & 0.3 & ?\% & ? \\
        %4 & 8481 & 12 & 23.7 & 0.3 & 2^⁻6\% &\(2^{-377}\) \\
        5 & 32 999 & 11 & 21.2 & 0.1 & ?\% & ? \\
        %5 & 32 999 & 11 & 21.2 & 0.1 & 2^⁻6\% &\(2^{-967}\) \\
        6 & 140 090 & 10 & 20.7 & 0.0 & ?\% & ? \\
        %6 & 140 090 & 10 & 20.7 & 0.0 & 2^⁻6\% &\(2^{-\infty}\) \\
        7 & 568 315 & 9 & 19.4 & 0.0 & ?\% & ? \\
        %7 & 568 315 & 9 & 19.4 & 0.0 & 2^⁻6\% &\(??\) \\
        8 & 2 841 573 & 11 & 22.3 & 0.0 & ?\% & ? \\
        %8 & 2 841 573 & 11 & 22.3 & 0.0 & 2^⁻6\% &\(??\) \\
        \hline
    \end{tabular}
    \caption{Experimental Parameterization Results for FNR and FPR Calculation}
    \label{tab:experimental_parameterization}
\end{table}


\subsection{Experimental Derivation of the FNR and FPR for different (\(m, l\)) Parameter Configurations with Compression}
In this subsection, we will experimentally evaluate the False Negative Rate (FNR) and False Positive Rate (FPR) through the \(l\) iterations of \textit{PostHash}. As in the previous section, the initial step involves computing the Hamming distance between \(Hash_{\text{key}}(X)\) and \(Hash_{\text{key}}(Y)\). To generate the \(Hash_{\text{key}}\) of an image, which consists of the \(l\) iterations of \textit{PreHash}, we designed the \textit{Iterative\_PostHash} algorithm to accept the same multiple inputs as previously described. For testing purposes, the \(l\) keys are derived in the same way as specified earlier. For an image, the algorithm first generates a list of the \(l\) iterations of \textit{PreHash} and then applies the \textit{PostHash} algorithm to each output of the \textit{PreHash} algorithm. The \textit{Iterative\_PostHash} algorithm then produces \(l\) iterations for the image. After both images pass through this algorithm, each iteration is compared; yielding 1 if the iterations differ and 0 if they are the same. Summing these comparison results allows us to calculate the total number of ones, effectively computing the Hamming distance between the iterations.


%Our methodology involves processing our image dataset through a pipeline that initially applies \textit{PreHash} to generate a single index hash (\(m=1\)) for each of the \(l=1107\) iterations. Subsequently, \textit{PostHash} compresses these indexes into 4-bit integers. We then compute the normalized Hamming distance between each image pair, with each image represented by \(l \times d\) bits. Lastly, we determine matches based on a specific threshold (\(t\)) tailored to the combined parameters of \(m=1\) and \(l=1107\). To facilitate this experiment, we will derive the threshold \(t\) accordingly.